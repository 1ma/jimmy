<?php

declare(strict_types=1);

namespace Bitcoin\Tests\Tx;

use Bitcoin\Tests\StreamingHelperTrait;
use Bitcoin\Tx\Fetcher;

final class MockFetcher implements Fetcher
{
    use StreamingHelperTrait;

    private const TEST_TRANSACTIONS = [
        'c91bfb1368353aa3d30e2492f3ec4eb8e701d28bd2dfe0aa2731543ff3f29218' => '01000000013e5aaae395ea78fb7ba7fcd3c29ceb33c6c6d8fb7d4a3449cd1540d2929972c0000000006b483045022100a24920c735fc2fba5dfde3f05d75ad670c3a59f942cf8ed7ebf61828773fb3dd02206a3b7c88a7264bc566fd550abeeff43e127db46d8d7296b01402ec32f5f8696e012103c39ac8224ec2e3b9498b729d25310dc9ec28561cbf5fe94f400060b14e18cea3ffffffff0100350c00000000001976a9141b339fd6fcf23f0b9e6857404b2eb0c9b1f810e488ac00000000',
        'c0729992d24015cd49344a7dfbd8c6c633eb9cc2d3fca77bfb78ea95e3aa5a3e' => '02000000033a58ba27bb4bdf4fed460663dde40aee9e73cd6ef47fdaa60e8d980789b18fc5000000006b483045022100bfd91867f96485d964546c474e13298d812bc22440e395fcdb865ec6a3a28312022053b59ab748d4761c4232969a8f727c0204d29dc850bbc0a55db07578f708a73401210226791d05c90bcd64707899432bebabcad236ebe8ea0d1312c3ba27e523e4de17feffffff6d14b84a2cb5f0ac6f193e817601d4ec4d549e2dd163e6dfbe6f5f7fb649f5fe010000006a4730440220625f887e32c3508a5002d1d17d194a7490943a20475e1d7bb5cf26b214b51559022039813d9a4959c1f09d8a0cc8cbb9ba96d49da889b6cf32473af4ef2b68fb5c5c012103577b814bb18ef53062ffab6ddd3f81d3db3d89937210a3e0ee892c8f63097787feffffff89a45d6c09ab3e373fa661d89ba489614a4768d0df6e0232e8f878931aeaab0c000000006a473044022043cb625ade2c516308f2e777bb7d2626a5b3733a627a2bac8fb6948638da0fc50220383808439a14e86b08f658688ddc3d5c4e3f2f7280238864c9890c7bf578a43b01210226791d05c90bcd64707899432bebabcad236ebe8ea0d1312c3ba27e523e4de17feffffff0240420f00000000001976a91426a5786620140199e76ddc15c8c35de73029092688ac12e81400000000001976a9140e82e83eea83be538ae77521cc2d9606eb3d0c1388ac794f1200',
        '52559dc26a305f38a1a058a0f413f0a3142c76841176b3a2fe701128f582bfcc' => '0200000001d9c9b95f366e3c9167f4b05652c9c75c243227b0bd7d0086cabb325b5fe9e1c7010000006a4730440220350e03e0c686e242315153c64f414aa4751b46b690605cb182bb44194dad45c502200c7634d3ebdd0c28803552b020ecfe1825a78e32dd883b0118cbde574f174d1c012103e5ebb1b55b37dfe8d87d9f11b107b4bb44e36278c2df60bb7334ee3730483b59fdffffff0276101000000000001976a9149bf04eb1c7890913060f7a32fdc88514fb7b595888ac7df52825000000001976a9143f64fe9c15acf240e548058d1b5fed8e6f29148588ac143c2600',
        'c7e1e95f5b32bbca86007dbdb02732245cc7c95256b0f467913c6e365fb9c9d9' => '0200000001451eb3c18a43832d5ccf0db70dc7a73616777ce6b8db0a0b34ae33222c548615000000006a4730440220761acd2833015a5e2f100e9b3f9497a3e8ea7d7eef6f0571c989186e7729fd4902205b5aea504e503cf62e10a0ed285501ed3805b1812719a860f8436795e2758a92012102a1b530c14976830b2dd66ce44fe6ddbae8152d2e7b8eaf99e837d5ae76c87697fdffffff0246731800000000001976a91496db7fdfa2d0f9673eeba26cae993b7a3b66e8e288acd75d3925000000001976a9144d879a547ae0b934b643cd3f082b5bb917846e4f88ac133c2600',
        '1f66560bda7196f6378f8cc7c9d2ff8abafb196d4fb2b5d1660fd0ff4a71dd25' => '02000000029221d23942970fae4e1a223af8c633b2b2375c525deee15ce90d696c7bad11cf000000006b483045022100bdb5919fd9d29ba078493fae6ec50e1502ea7cefeac9f15adbef9f68e2495377022066cc792319999e5fc4b73c089de28d0c519c30ddcae61f79d2b67bc13e016c4f012103fd5e2bda6d58c18658302407b1a8cbbd81836ac5a8cd0cadf81a4ea984f8ca42ffffffff6efc02f29eabb7a78e3a47276bbfbf75a3ed348610a0d4a6d4e5d70d80127200010000006a47304402203398593d731f648d83000faaf08cd5cce51807bd3409a185f76f9bbbf194fe5302203c19309e3d9dfbbdc6ea24733b8e748236112688440d0ab750e6d29dcbcafd32012103fd5e2bda6d58c18658302407b1a8cbbd81836ac5a8cd0cadf81a4ea984f8ca42ffffffff02a0860100000000001976a914883794834669f0f0949a80c9d62f1a08823acebb88ac946d1800000000001976a914c3cbd5cfb378f7f06104c1e5c4453609d88987de88ac00000000',
        'cf11ad7b6c690de95ce1ee5d525c37b2b233c6f83a221a4eae0f974239d22192' => '02000000013b4fe981150c817690ee7135335bce7da860d15380dbeaa3362b3a5dbf0005a0000000006a473044022028d4788aa1970ae3ffd892ef53c4b058237c114b55a59a90b8f8e3ff5c7ed99b02206f9f991467a0f11dda7e0b0b39b920505630e31843317a47fcff62a68f9c4620012103a4276021d46d4d38e45561e99c11c184d58a77aa46b07db5ba9a8318da6812a1fdffffff025d1f0000000000001976a914c3cbd5cfb378f7f06104c1e5c4453609d88987de88ac523f0100000000001976a91420f0d66e17a2a2635467a7fe7b9245f5386cea0688ac0e3c2600',
        '007212800dd7e5d4a6d4a0108634eda375bfbf6b27473a8ea7b7ab9ef202fc6e' => '020000000198cd0936a79fb02268aba4c478b16ccfeb01c7d04cf0c30d768518baea180900000000006a473044022068e47426ee110c42811f218e98771712c0c88604e8ec2a54220a469e86373e2702204f09792296cf636b3edbaf0119284342f3387570e89f5392f4fabb84249f775b01210330510740da615688f9c0dc72455f51e4885300970afcc384e4e5e8dbac1a2dedfdffffff021e24730a020000001976a914692f1dd8cc4663573787a456eb5c164f6859944488ac8bd61900000000001976a914c3cbd5cfb378f7f06104c1e5c4453609d88987de88ac0e3c2600',
        'f781eac22fd176430c7dbf37b9e55dcb2128089854b7d7c0f43eb61012d610e5' => '02000000013e0b6c0bd8a89de75c3df2418be5b95a2516e9668d95b52be4cd2f0f1697897d000000006a4730440220618f7563d2d10f06e21d0aee04d3e810d8cd587e891a029bdb6498478a64d74502206b95de3817b0f207741cbf38536fc86393b156028a6e41bc0c3176ff10920d0f01210300385d013203dad228be0aab8ed97223155ecc75794e289b830cbe840fdce11ffdffffff01a04c0000000000001976a9140a1573ba38474390a2454e4cf8ddaf0a0b422ca988ac383c2600',
        '7684d6893890d63a6ee8e14f6400e3168fd1638926350bbee8b79dc733f81159' => '0100000001e510d61210b63ef4c0d7b75498082821cb5de5b937bf7d0c4376d12fc2ea81f7000000006a47304402201a8c717ea78f9072f1f2f7ccf93a9512fb8d49dd0bdf614d67a1237761c7cd8c022030bb04d2057d2e8133fe12d9a6104442a9ddbef993a3f5adc382d908dda24b0801210290c7f33f050a916c31fb17250d8fd755448ee79ff8398f848ce74e056a545606ffffffff0358380000000000001976a914d6616725f82bef6379cc3a9b9993939dacf31eea88ac0e130000000000001976a9140324603ae536eed36317f4940e367cd8e027293288ac0000000000000000466a4441717565737461207472616e7361636369c3b320686120657374617420636f6e73747275c3af646120616d62205048502c2073616e672069206c6cc3a06772696d65732e00000000',
    ];

    public function fetch(string $txId, bool $testnet): mixed
    {
        return \array_key_exists($txId, self::TEST_TRANSACTIONS) ?
            self::stream(hex2bin(self::TEST_TRANSACTIONS[$txId])) : false;
    }
}
